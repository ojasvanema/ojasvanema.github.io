---
---
<div class="row">
  <div class="col-sm-12">
    <div class="publication-card p-3 mb-3" style="border: 1px solid var(--global-divider-color); border-radius: 15px; background-color: var(--global-card-bg-color);">
      <div class="row">
        <!-- Image Column -->
        {% if site.enable_publication_thumbnails and entry.preview %}
          <div class="col-md-5 d-flex align-items-center justify-content-center">
            {% if entry.preview contains '://' %}
              <img class="preview img-fluid rounded z-depth-1" src="{{ entry.preview }}" style="width: 100%; object-fit: cover;">
            {% else %}
              {% assign entry_path = entry.preview | prepend: '/assets/img/publication_preview/' %}
              {%
                include figure.liquid
                loading="eager"
                path=entry_path
                sizes = "800px"
                class="preview img-fluid rounded z-depth-1"
                zoomable=true
                avoid_scaling=true
                alt=entry.preview
                style="width: 100%; object-fit: cover;"
              %}
            {% endif %}
          </div>
        {% endif %}

        <!-- Content Column -->
        <div class="col-md-7">
          <div id="{{ entry.key }}">
            <!-- Title -->
            <h5 class="title font-weight-bold">{{ entry.title }}</h5>
            
            <!-- Author -->
            <div class="author">
              {% assign author_array_size = entry.author_array | size %}

              {% assign author_array_limit = author_array_size %}
              {% if site.max_author_limit and author_array_size > site.max_author_limit %}
                {% assign author_array_limit = site.max_author_limit %}
              {% endif %}

              {%- for author in entry.author_array limit: author_array_limit -%}
                {% assign author_is_self = false %}
                {%- assign author_last_name = author.last | regex_replace: '[*∗†‡§¶‖&^]', '' -%}
                {%- assign author_last_html = author.last | regex_replace: '([*∗†‡§¶‖&^]+)', '<sup>\1</sup>' -%}
                {% if site.scholar.last_name contains author_last_name %}
                  {% if site.scholar.first_name contains author.first %}
                    {% assign author_is_self = true %}
                  {% endif %}
                {%- endif -%}
                {% assign coauthor_url = null %}
                {%- assign clean_last_name = author_last_name | downcase | remove_accents -%}
                {% if site.data.coauthors[clean_last_name] %}
                  {%- for coauthor in site.data.coauthors[clean_last_name] -%}
                    {% if coauthor.firstname contains author.first %}
                      {%- assign coauthor_url = coauthor.url -%}
                      {% break %}
                    {%- endif -%}
                  {% endfor %}
                {%- endif -%}

                {%- if forloop.length > 1 -%}
                  {% if forloop.first == false -%}
                    {%- if forloop.length > 2 %}, {% elsif forloop.length == 2 %}  {% endif %}
                  {%- endif %}
                  {%- if forloop.last and author_array_limit == author_array_size %}and {% endif -%}
                {% endif %}
                {%- if author_is_self -%}
                  <em>
                    {{- author.first }}
                    {{ author_last_html -}}
                  </em>
                {%- else -%}
                  {%- if coauthor_url -%}
                    <a href="{{ coauthor_url }}">
                      {{- author.first }}
                      {{ author_last_html -}}
                    </a>
                  {%- else -%}
                    {{- author.first }}
                    {{ author_last_html -}}
                  {% endif %}
                {%- endif -%}
              {% endfor %}
              {%- assign more_authors = author_array_size | minus: author_array_limit -%}

              {%- assign more_authors_hide = more_authors | append: ' more author' -%}
              {% if more_authors > 0 %}
                {%- if more_authors > 1 -%}
                  {% assign more_authors_hide = more_authors_hide | append: 's' %}
                {%- endif -%}
                {% assign more_authors_show = '' %}
                {%- for author in entry.author_array offset: author_array_limit -%}
                  {% assign more_authors_show = more_authors_show | append: author.first | append: ' ' | append: author.last %}
                  {% unless forloop.last %}
                    {% assign more_authors_show = more_authors_show | append: ', ' %}
                  {% endunless %}
                {%- endfor -%}
                {%- assign more_authors_show = more_authors_show | regex_replace: '([*∗†‡§¶‖&^]+)', '<sup>\1</sup>' -%}
                , and
                <span
                  class="more-authors"
                  title="click to view {{ more_authors_hide }}"
                  onclick="
                      var element = $(this);
                      element.attr('title', '');
                      var more_authors_text = element.text() == '{{ more_authors_hide }}' ? '{{ more_authors_show }}' : '{{ more_authors_hide }}';
                      var cursorPosition = 0;
                      var textAdder = setInterval(function(){
                        element.html(more_authors_text.substring(0, cursorPosition + 1));
                        if (++cursorPosition == more_authors_text.length){
                          clearInterval(textAdder);
                        }
                    }, '{{ site.more_authors_animation_delay }}');
                  "
                >
                  {{- more_authors_hide -}}
                </span>
              {% endif %}
            </div>

            <!-- Venue / Periodical -->
            <div class="periodical mt-2">
              <b>{{ entry.abbr }}</b>
              {% if entry.type == 'article' %}
                <em>{{ entry.journal }}</em>
              {% elsif entry.type == 'inproceedings' %}
                <em>{{ entry.booktitle }}</em>
              {% endif %}
              {% if entry.year %}
                {{ entry.year }}
              {% endif %}
            </div>

            <!-- Description -->
            {% if entry.description %}
              <div class="description mt-3" style="font-size: 0.95rem;">
                {{ entry.description }}
              </div>
            {% endif %}

            <!-- Links -->
            <div class="links mt-3">
              {% if entry.pdf %}
                {% if entry.pdf contains '://' %}
                  <a href="{{ entry.pdf }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
                {% else %}
                  <a href="{{ entry.pdf | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">PDF</a>
                {% endif %}
              {% endif %}
              {% if entry.website %}
                <a href="{{ entry.website }}" class="btn btn-sm z-depth-0" role="button">Website</a>
              {% endif %}
              {% if entry.arxiv %}
                <a href="http://arxiv.org/abs/{{ entry.arxiv }}" class="btn btn-sm z-depth-0" role="button">arXiv</a>
              {% endif %}
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
